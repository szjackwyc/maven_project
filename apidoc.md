<!DOCTYPE html> <html lang="zh"> <head> <meta charset="utf-8"/> <link rel="shortcut icon" href="http://www.mdeditor.com/images/logos/favicon.ico" type="image/x-icon"/> </head> <body><h1 id="h1-restful-api-"><a name="Restful API 接口规范模板" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Restful API 接口规范模板</h1><h2 id="h2--"><a name="「接口请求方式」" class="reference-link"></a><span class="header-link octicon octicon-link"></span>「接口请求方式」</h2><p><strong>GET（SELECT）：从服务器取出资源（一项或多项）</strong></p> <p><strong>POST（CREATE）：在服务器新建一个资源</strong></p> <p><strong>PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）</strong></p> <p><strong>DELETE（DELETE）：从服务器删除资源</strong></p> <h2 id="h2--"><a name="「接口请求格式」" class="reference-link"></a><span class="header-link octicon octicon-link"></span>「接口请求格式」</h2><p><strong>Content-Type: application/json</strong></p> <h2 id="h2--"><a name="「签名规则」(待讨论，个人想法)" class="reference-link"></a><span class="header-link octicon octicon-link"></span>「签名规则」(待讨论，个人想法)</h2><p>签名生成的步骤如下：</p> <p>第一步，设所有发送或者接收到的数据为集合M，将集合M内非空参数值的参数按照参数名ASCII码从小到大排序（字典序），使用URL键值对的格式（即key1=value1&amp;key2=value2…）拼接成字符串stringA。</p> <p>加密和验证规则：</p> <p>◆ 参数名ASCII码从小到大排序（字典序）；<br>◆ 如果参数的值为空不参与签名；<br>◆ 参数名区分大小写；<br>◆ 传送的sign参数不参与签名，将生成的签名与该sign值作校验。 </p><p>第二步，在对stringA进行MD5运算，再将得到的字符串所有字符转换为大写，得到sign值。</p> <p>举例：</p> <p>假设传送的参数如下：</p> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"timestamp"</span><span class="pun">:</span><span class="str">"时间戳yyyyMMddHHmmss"</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"userName"</span><span class="pun">:</span><span class="str">"用户名（string,50，必填）"</span><span class="pun">,</span></code></li><li class="L3"><code class="lang-json"><span class="pln"> </span><span class="str">"password"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"密码(MD5加密，必填)"</span><span class="pun">,</span></code></li><li class="L4"><code class="lang-json"><span class="pln"> </span><span class="str">"age"</span><span class="pun">:</span><span class="str">"18"</span><span class="pun">,</span></code></li><li class="L5"><code class="lang-json"><span class="pln"> </span><span class="str">"sex"</span><span class="pun">:</span><span class="str">"M"</span></code></li><li class="L6"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <p>第一步：对参数按照key=value的格式，并按照参数名ASCII字典序排序如下：</p> <p>stringA=”age=18&amp;password=123456&amp;sex=M&amp;timestamp=20180821145500&amp;userName=xxx”;</p> <p>第二步，在对stringA进行MD5运算</p> <p>sign=MD5(stringA).toUpperCase()=”9A0A8659F005D6984697E2CA0A9CF3B7” //注：MD5签名方式</p> <p>最终发送请求参数：</p> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"timestamp"</span><span class="pun">:</span><span class="str">"时间戳yyyyMMddHHmmss"</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"userName"</span><span class="pun">:</span><span class="str">"用户名（string,50，必填）"</span><span class="pun">,</span></code></li><li class="L3"><code class="lang-json"><span class="pln"> </span><span class="str">"password"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"密码(MD5加密，必填)"</span><span class="pun">,</span></code></li><li class="L4"><code class="lang-json"><span class="pln"> </span><span class="str">"age"</span><span class="pun">:</span><span class="str">"18"</span><span class="pun">,</span></code></li><li class="L5"><code class="lang-json"><span class="pln"> </span><span class="str">"sex"</span><span class="pun">:</span><span class="str">"M"</span><span class="pun">,</span></code></li><li class="L6"><code class="lang-json"><span class="pln"> </span><span class="str">"sign"</span><span class="pun">:</span><span class="str">"9A0A8659F005D6984697E2CA0A9CF3B7"</span></code></li><li class="L7"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <h2 id="h2--user-"><a name="示例 - 用户User模块" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例 - 用户User模块</h2><h3 id="h3-1-post-"><a name="1. POST 新增用户" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. POST 新增用户</h3><ul> <li><p>URL: /v1/user</p> </li><li><p>request</p> </li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"timestamp"</span><span class="pun">:</span><span class="str">"时间戳yyyyMMddHHmmss"</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"userName"</span><span class="pun">:</span><span class="str">"用户名（string,50，必填）"</span><span class="pun">,</span></code></li><li class="L3"><code class="lang-json"><span class="pln"> </span><span class="str">"password"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"密码(MD5加密，必填)"</span><span class="pun">,</span></code></li><li class="L4"><code class="lang-json"><span class="pln"> </span><span class="str">"age"</span><span class="pun">:</span><span class="str">"18"</span><span class="pun">,</span></code></li><li class="L5"><code class="lang-json"><span class="pln"> </span><span class="str">"sex"</span><span class="pun">:</span><span class="str">"M"</span></code></li><li class="L6"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <ul> <li>response</li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"status"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"SUCCESS"</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"result"</span><span class="pun">:{</span></code></li><li class="L3"><code class="lang-json"><span class="pln"> </span><span class="str">"userId"</span><span class="pun">：</span><span class="pln"> </span><span class="str">"用户ID"</span></code></li><li class="L4"><code class="lang-json"><span class="pln"> </span><span class="pun">}</span></code></li><li class="L5"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <h3 id="h3-2-get-"><a name="2. GET 用户列表" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. GET 用户列表</h3><ul> <li><p>URL: /v1/user</p> </li><li><p>request</p> </li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"timestamp"</span><span class="pun">:</span><span class="str">"时间戳yyyyMMddHHmmss"</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"userName"</span><span class="pun">:</span><span class="str">"用户名（模糊查询不传查全部）"</span><span class="pun">,</span></code></li><li class="L3"><code class="lang-json"><span class="pln"> </span><span class="str">"page"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"当前页（不传查全部）"</span><span class="pun">,</span></code></li><li class="L4"><code class="lang-json"><span class="pln"> </span><span class="str">"size"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"每页条数（不传查全部）"</span></code></li><li class="L5"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <ul> <li>response</li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"status"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"SUCCESS"</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"result"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="lang-json"><span class="pln"> </span><span class="str">"total"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"总数"</span><span class="pun">,</span></code></li><li class="L4"><code class="lang-json"><span class="pln"> </span><span class="str">"userList"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span></code></li><li class="L5"><code class="lang-json"><span class="pln"> </span><span class="str">"userId"</span><span class="pun">:</span><span class="lit">1</span><span class="pun">，</span></code></li><li class="L6"><code class="lang-json"><span class="pln"> </span><span class="str">"userName"</span><span class="pun">:</span><span class="str">"用户名"</span><span class="pun">,</span></code></li><li class="L7"><code class="lang-json"><span class="pln"> </span><span class="str">"age"</span><span class="pun">:</span><span class="str">"18"</span><span class="pun">,</span></code></li><li class="L8"><code class="lang-json"><span class="pln"> </span><span class="str">"sex"</span><span class="pun">:</span><span class="str">"M"</span></code></li><li class="L9"><code class="lang-json"><span class="pln"> </span><span class="pun">}]</span></code></li><li class="L0"><code class="lang-json"><span class="pln"> </span><span class="pun">}</span></code></li><li class="L1"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <h3 id="h3-3-get-"><a name="3. GET 单个用户" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3. GET 单个用户</h3><ul> <li><p>URL: /v1/user/{userId}</p> </li><li><p>request</p> </li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"timestamp"</span><span class="pun">:</span><span class="str">"时间戳yyyyMMddHHmmss"</span></code></li><li class="L2"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <ul> <li>response</li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"status"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"SUCCESS"</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"result"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="lang-json"><span class="pln"> </span><span class="str">"user"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="lang-json"><span class="pln"> </span><span class="str">"userName"</span><span class="pun">:</span><span class="str">"用户名"</span><span class="pun">,</span></code></li><li class="L5"><code class="lang-json"><span class="pln"> </span><span class="str">"age"</span><span class="pun">:</span><span class="str">"18"</span><span class="pun">,</span></code></li><li class="L6"><code class="lang-json"><span class="pln"> </span><span class="str">"sex"</span><span class="pun">:</span><span class="str">"M"</span></code></li><li class="L7"><code class="lang-json"><span class="pln"> </span><span class="pun">}</span></code></li><li class="L8"><code class="lang-json"><span class="pln"> </span><span class="pun">}</span></code></li><li class="L9"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <h3 id="h3-4-put-"><a name="4. PUT 修改用户" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4. PUT 修改用户</h3><ul> <li><p>URL: /v1/user/{userId}</p> </li><li><p>request</p> </li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"timestamp"</span><span class="pun">:</span><span class="str">"时间戳yyyyMMddHHmmss"</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"userName"</span><span class="pun">:</span><span class="str">"用户名（string,50，必填）"</span><span class="pun">,</span></code></li><li class="L3"><code class="lang-json"><span class="pln"> </span><span class="str">"password"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"密码(MD5加密，必填)"</span><span class="pun">,</span></code></li><li class="L4"><code class="lang-json"><span class="pln"> </span><span class="str">"age"</span><span class="pun">:</span><span class="str">"18"</span><span class="pun">,</span></code></li><li class="L5"><code class="lang-json"><span class="pln"> </span><span class="str">"sex"</span><span class="pun">:</span><span class="str">"M"</span></code></li><li class="L6"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <ul> <li>response</li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"status"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"SUCCESS"</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"result"</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">null</span></code></li><li class="L3"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <h3 id="h3-5-delete-"><a name="5. DELETE 删除用户" class="reference-link"></a><span class="header-link octicon octicon-link"></span>5. DELETE 删除用户</h3><ul> <li><p>URL: /v1/user/{userId}</p> </li><li><p>request</p> </li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"timestamp"</span><span class="pun">:</span><span class="str">"时间戳yyyyMMddHHmmss"</span></code></li><li class="L2"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <ul> <li>response</li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">{</span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"status"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"SUCCESS"</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"result"</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">null</span></code></li><li class="L3"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> </body> </html>
